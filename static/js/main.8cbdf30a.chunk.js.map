{"version":3,"sources":["components/Board.js","components/Rank.js","components/Square.js","assets/Chess_ndt45.svg","components/Knight.js","utils/mathUtils.js","strings.js","constants.js","utils/boardUtils.js","LangContext.js","containers/Buttons.js","components/DisclosureWidget.js","utils/useCopy.js","components/StatsSection.js","containers/Stats.js","components/Checkbox.js","components/NumberInput.js","containers/Settings.js","containers/Main.js","utils/imageUtils.js","components/LangSwitcher.js","App.js","index.js"],"names":["Board","refCallback","children","className","ref","Rank","rankName","isCurrent","Square","handleClick","visitCount","maxSquareCount","squareName","getHeatmapHexString","setDropSquare","makeManualMove","unsetClickedSquare","isDragging","isTarget","isManual","displaySettings","showCount","showPercent","showHeatmap","showHighlight","useState","isDropTarget","setIsDropTarget","ratio","percentText","Math","round","style","backgroundColor","handleDragOver","event","preventDefault","dataTransfer","dropEffect","tdClass","undefined","title","onDragEnter","onDragOver","onDragLeave","onDrop","onClick","Knight","squareWidth","visualRankIndex","fileIndex","interval","setIsDragging","isDraggable","isResizing","isClicked","setClickedSquare","transitionValue","cursor","width","height","left","top","transition","role","draggable","onDragStart","setData","effectAllowed","onDragEnd","src","knightSvg","alt","Vector","x","y","plus","addedVector","newCoords","times","multipliedScalar","reverse","this","array","checkIfBIsNotOutsideAAndC","a","b","c","strings","langCode","en","fr","OTHER_LANG","OTHER_LANG_CODE","TITLE","START","STOP","RESET","SETTINGS","SPEED","SPEED_NAMES","SHOW","KNIGHT","COUNT","PERCENT_MAX","HEATMAP","HIGHLIGHT","BOARD","RANKS","FILES","ROWS","COLS","NEW_BOARD","MODE","AUTOMATIC","MANUAL","STATS","TRIP_COUNT","MOVE_COUNTS","AVERAGE","TOTAL_MOVES","COPY","COPY_MSG","COPY_BOARD","COPIED","TO_INITIAL","TO_ALL","Object","keys","forEach","key","empty","ALPHABET","SPEED_MAP","Map","MIN_INTERVAL","getFileName","getRankName","rankIndex","toString","getSquareName","parseSquareName","split","indexOf","parseInt","checkIfLegal","totalFiles","totalRanks","memoizedMoves","prevDimsString","getLegalMoves","boardDims","dimsString","join","Array","isArray","startSquare","moves","PI","cos","sin","theta","firstOffset","twoSquareOffset","twoStepSquare","secondOffset","firstEndIndices","secondEndIndices","push","LangContext","createContext","lang","setLang","startTimer","makeRandomMoves","setIntervalId","totalNewMoves","max","window","setInterval","Buttons","resetBoard","useContext","setPrevDimsString","intervalId","prevInterval","setPrevInterval","resetRef","useRef","useEffect","clearInterval","handleStop","disabled","type","current","blur","DisclosureWidget","buttonText","restProps","expanded","setExpanded","togglerClass","contentClass","cloneElement","copyToClipboard","text","callback","navigator","clipboard","writeText","useCopy","copyCallback","resetCallback","hasCopied","setHasCopied","timeoutId","setTimeout","clearTimeout","string","sumReducer","acc","val","StatsSection","id","heading","setButtonText","handleCopy","showCopy","setShowCopy","textareaRef","scrollTo","scrollHeight","behavior","textareaId","countId","aveId","textareaValue","average","length","reduce","toFixed","clipboardValue","EOL","buttonClass","classNames","copy","show","msgClass","data-heading","aria-labelledby","htmlFor","onMouseEnter","onMouseLeave","readOnly","value","Stats","stats","totalMoves","countsForReturn","countsForTour","visitCounts","visitCountsString","slice","map","rankCounts","Checkbox","isChecked","isDisabled","handleChange","labelClass","onChange","checked","NumberInput","label","titleValue","min","intervals","from","values","Settings","speedNames","speedIndex","setSpeed","showKnight","toggleDisplaySettings","initialTotalFiles","initialTotalRanks","changeDimensions","setMode","newTotalFiles","setNewTotalFiles","newTotalRanks","setNewTotalRanks","multiple","nameObj","i","target","name","initialStats","currentReturnCount","currentTourCount","Main","boardRefCallback","element","boardEl","clientWidth","state","setState","resizeCallback","contentRect","newId","heatValue","imageData","rawIndex","data","index","byte","red","green","blue","getHeatmapRGB","gradientImageData","reverseRankIndex","moveKnight","newMoves","newSquareNames","indices","newVisitCounts","rank","filter","lastMove","newMaxSquareCount","flat","currentFileIndex","currentRankIndex","startSquareName","visitedSquareNameSet","tempFileIndex","tempRankIndex","tempReturnCount","tempTourCount","tempVisitedSquareNameSet","Set","newReturnCounts","newTourCounts","possibleMoves","nextMoveIndex","floor","random","nextMove","nextSquareName","add","size","newStats","concat","newReturnCount","newTourCount","newVisitedSquareNameSet","settingName","newDisplaySettings","assign","initialRankIndex","initialFileIndex","fill","document","documentElement","setProperty","newSquareWidth","console","error","bool","targetSquareNames","Error","logicalRankIndex","move","canvasWidth","colorStops","virtualCanvas","createElement","canvasContext","getContext","heatmapGradient","createLinearGradient","colorStop","addColorStop","fillStyle","fillRect","getImageData","getGradientImageData","getComputedStyle","getPropertyValue","resizeObserver","ResizeObserver","observe","disconnect","displayKnight","rankVisits","isCurrentRank","logicalFileIndex","includes","props","Component","LangSwitcher","App","language","newLang","Provider","href","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8cbdf30a.chunk.js","sourcesContent":["const Board = ({ refCallback, children }) => (\n  <div className=\"board-wrapper\">\n    <table ref={refCallback}>\n      <tbody>\n        {children}\n      </tbody>\n    </table>\n  </div>\n);\n\nexport default Board;","const Rank = ({ rankName, isCurrent, children }) => (\n  <tr>{children}</tr>\n);\n\nexport default Rank;\n","import { useState } from \"react\";\n\nconst Square = ({\n  visitCount,\n  maxSquareCount,\n  squareName,\n  getHeatmapHexString,\n  setDropSquare,\n  makeManualMove,\n  unsetClickedSquare,\n  isCurrent,\n  isDragging,\n  isTarget,\n  isManual,\n  displaySettings: { showCount, showPercent, showHeatmap, showHighlight },\n}) => {\n  const [isDropTarget, setIsDropTarget] = useState(false);\n\n  const ratio = visitCount / maxSquareCount;\n  const percentText = `${Math.round(100 * ratio)}%`;\n  const style = showHeatmap\n    ? { backgroundColor: getHeatmapHexString(ratio) }\n    : null;\n\n  const handleDragOver = (event) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = \"move\";\n    if (!isDropTarget && (!isManual || isTarget)) {\n      setIsDropTarget(true);\n    }\n  };\n  const handleDragLeave = (event) => {\n    event.preventDefault();\n    setIsDropTarget(false);\n  };\n  const handleDrop = (event) => {\n    event.preventDefault();\n    setIsDropTarget(false);\n    if (isManual && isTarget) makeManualMove(squareName);\n    else if (!isManual) setDropSquare(squareName);\n  };\n  let handleClick;\n  if (isManual) {\n    if (isTarget) {\n      handleClick = () => {\n        makeManualMove(squareName);\n      };\n    } else {\n      handleClick = () => {\n        unsetClickedSquare();\n      };\n    }\n  }\n\n  let tdClass = isCurrent && showHighlight ? \"current\" : undefined;\n  if (tdClass === \"current\" && isDragging) {\n    tdClass += \" dragged\";\n  }\n  if (isDropTarget || isTarget) {\n    tdClass = \"drop-target\";\n  }\n\n  return (\n    <td\n      className={tdClass}\n      title={squareName}\n      onDragEnter={handleDragOver}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onDrop={handleDrop}\n      onClick={handleClick}\n      style={style}\n    >\n      {showPercent && <span className=\"percent\">{percentText}</span>}\n      {showCount && <span className=\"count\">{visitCount}</span>}\n    </td>\n  );\n};\n\nexport default Square;\n","export default __webpack_public_path__ + \"static/media/Chess_ndt45.d714eeb4.svg\";","// import { ReactComponent as KnightSvg } from '../assets/Chess_ndt45.svg';\nimport knightSvg from \"../assets/Chess_ndt45.svg\";\n\n// svg from WikiCommons, importing for img element to add alt text\n/*\n  By en:User:Cburnett - Own work\n  This W3C-unspecified vector image was created with Inkscape .,\n  CC BY-SA 3.0,\n  https://commons.wikimedia.org/w/index.php?curid=1499807\n*/\n\nfunction Knight({\n  squareWidth,\n  visualRankIndex,\n  fileIndex,\n  interval,\n  setIsDragging,\n  isDraggable,\n  isResizing,\n  isManual,\n  isClicked,\n  setClickedSquare,\n  unsetClickedSquare,\n}) {\n  const transitionValue = isResizing ? \"none\" : `all ${interval / 2}ms`;\n  const handleDragStart = (event) => {\n    event.dataTransfer.setData(\"text/plain\", `${fileIndex},${visualRankIndex}`);\n    event.dataTransfer.effectAllowed = \"move\";\n    event.dataTransfer.dropEffect = \"move\";\n    setIsDragging(true);\n    if (isManual) setClickedSquare(fileIndex, visualRankIndex);\n  };\n  const handleDragEnd = () => {\n    setIsDragging(false);\n  };\n  let handleClick;\n  if (isManual) {\n    handleClick = isClicked\n      ? () => {\n          unsetClickedSquare();\n        }\n      : () => {\n          setClickedSquare(fileIndex, visualRankIndex);\n        };\n  }\n\n  let cursor = \"default\";\n  if (isManual) cursor = \"pointer\";\n  else if (isDraggable) cursor = \"grab\";\n\n  return (\n    <div\n      className=\"piece\"\n      style={{\n        width: squareWidth,\n        height: squareWidth,\n        left: squareWidth * fileIndex,\n        top: squareWidth * visualRankIndex,\n        transition: transitionValue,\n        cursor: cursor,\n      }}\n      role=\"button\"\n      onClick={handleClick}\n    >\n      <img\n        draggable={isDraggable}\n        onDragStart={handleDragStart}\n        onDragEnd={handleDragEnd}\n        width={0.7 * squareWidth}\n        height={0.7 * squareWidth}\n        src={knightSvg}\n        alt=\"Knight\"\n      />\n    </div>\n  );\n}\n\nexport default Knight;\n","const Vector = class {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.array = [x, y];\n  }\n\n  plus = (addedVector) => {\n    const newCoords = [this.x + addedVector.x, this.y + addedVector.y];\n    return new Vector(...newCoords);\n  }\n\n  times = (multipliedScalar) => {\n    const newCoords = [multipliedScalar * this.x, multipliedScalar * this.y];\n    return new Vector(...newCoords);\n  }\n\n  reverse = () => {\n    return new Vector(this.y, this.x);\n  }\n}\n\nfunction checkIfBIsNotOutsideAAndC(a, b, c) {\n  return (a <= b) && (b <= c);\n}\n\nexport { Vector, checkIfBIsNotOutsideAAndC };\n","const strings = {\n  langCode: {\n    en: \"EN\",\n    fr: \"FR\",\n  },\n  OTHER_LANG: {\n    en: \"Français\",\n    fr: \"English\",\n  },\n  OTHER_LANG_CODE: {\n    en: \"fr\",\n    fr: \"en\",\n  },\n  TITLE: {\n    en: \"Random Knight Jumps\",\n    fr: \"Marche Aléatoire du Cavalier\",\n  },\n  START: {\n    en: \"Start\",\n    fr: \"Marche\",\n  },\n  STOP: {\n    en: \"Stop\",\n    fr: \"Arrêt\",\n  },\n  RESET: {\n    en: \"Reset\",\n    fr: \"Réinitialiser\",\n  },\n  SETTINGS: {\n    en: \"Settings\",\n    fr: \"Paramètres\",\n  },\n  SPEED: {\n    en: \"Speed\",\n    fr: \"Vitesse\",\n  },\n  SPEED_NAMES: [\n    {\n      en: \"Walk\",\n      fr: \"Pas\",\n    },\n    {\n      en: \"Trot\",\n      fr: \"Trot\",\n    },\n    {\n      en: \"Canter\",\n      fr: \"Petit galop\",\n    },\n    {\n      en: \"Gallop\",\n      fr: \"Galop\",\n    },\n    {\n      en: \"Jet\",\n      fr: \"Turboréacteur\",\n    },\n    {\n      en: \"Warp\",\n      fr: \"Supraluminique\",\n    },\n  ],\n  SHOW: {\n    en: \"Show\",\n    fr: \"Afficher\",\n  },\n  KNIGHT: {\n    en: \"Knight\",\n    fr: \"Cavalier\",\n  },\n  COUNT: {\n    en: \"Count\",\n    fr: \"Compte\",\n  },\n  PERCENT_MAX: {\n    en: \"% of max\",\n    fr: \"% de la valeur max\",\n  },\n  HEATMAP: {\n    en: \"Heatmap\",\n    fr: \"Carte de chaleur\",\n  },\n  HIGHLIGHT: {\n    en: \"Highlight\",\n    fr: \"Surlignage\",\n  },\n  BOARD: {\n    en: \"Board\",\n    fr: \"Échiquier\",\n  },\n  RANKS: {\n    en: \"Ranks\",\n    fr: \"Rangées\",\n  },\n  FILES: {\n    en: \"Files\",\n    fr: \"Colonnes\",\n  },\n  ROWS: {\n    en: \"i.e., rows\",\n    fr: \"\",\n  },\n  COLS: {\n    en: \"i.e., columns\",\n    fr: \"\",\n  },\n  NEW_BOARD: {\n    en: \"New Board\",\n    fr: \"Nouvel Échiquier\",\n  },\n  MODE: {\n    en: \"Mode\",\n    fr: \"Mode\",\n  },\n  AUTOMATIC: {\n    en: \"Automatic\",\n    fr: \"Automatique\",\n  },\n  MANUAL: {\n    en: \"Manual\",\n    fr: \"Manuel\",\n  },\n  STATS: {\n    en: \"Stats for nerds\",\n    fr: \"Statistiques\",\n  },\n  TRIP_COUNT: {\n    en: \"Completed trips:\",\n    fr: \"Voyages terminés:\",\n  },\n  MOVE_COUNTS: {\n    en: \"Moves per trip:\",\n    fr: \"Coups par voyage:\",\n  },\n  AVERAGE: {\n    en: \"Average:\",\n    fr: \"Moyen:\",\n  },\n  TOTAL_MOVES: {\n    en: \"Total moves:\",\n    fr: \"Nombre de coups:\",\n  },\n  COPY: {\n    en: \"Copy\",\n    fr: \"Copier\",\n  },\n  COPY_MSG: {\n    en: \"Formatted as single column\",\n    fr: \"En forme d'une seule colonne\",\n  },\n  COPY_BOARD: {\n    en: \"Copy board as CSV\",\n    fr: \"Copier l'échiquier au format CSV\",\n  },\n  COPIED: {\n    en: \"Copied!\",\n    fr: \"Copié!\",\n  },\n  TO_INITIAL: {\n    en: \"To initial square\",\n    fr: \"À la case initiale\",\n  },\n  TO_ALL: {\n    en: \"To all squares\",\n    fr: \"À toutes les cases\",\n  },\n};\n\nObject.keys(strings).forEach((key) => {\n  strings[key].empty = \"\";\n});\n\nexport default strings;\n","import strings from \"./strings\";\n\nconst { SPEED_NAMES } = strings;\n\nconst ALPHABET = \"abcdefghijklmnopqrstuvwxyz\";\n\nconst SPEED_MAP = new Map([\n  [SPEED_NAMES[0], 600],\n  [SPEED_NAMES[1], 300],\n  [SPEED_NAMES[2], 200],\n  [SPEED_NAMES[3], 100],\n  [SPEED_NAMES[4], 10],\n  [SPEED_NAMES[5], 1],\n]);\n\nconst MIN_INTERVAL = 100;\n\nconst MIN_BOARD_LENGTH = 5;\nconst MAX_BOARD_LENGTH = 12;\n\nconst CANVAS_WIDTH = 500;\n\nexport {\n  ALPHABET,\n  SPEED_MAP,\n  MIN_INTERVAL,\n  CANVAS_WIDTH,\n  MIN_BOARD_LENGTH,\n  MAX_BOARD_LENGTH,\n};\n","import { Vector, checkIfBIsNotOutsideAAndC } from './mathUtils';\nimport { ALPHABET } from '../constants';\n\nconst getFileName = fileIndex => ALPHABET[fileIndex];\nconst getRankName = rankIndex => (rankIndex + 1).toString();\nconst getSquareName = (fileIndex, rankIndex) =>\n  getFileName(fileIndex) + getRankName(rankIndex);\nconst parseSquareName = (squareName) => ({\n  fileIndex: ALPHABET.split('').indexOf(squareName[0]),\n  rankIndex: parseInt(squareName[1], 10) - 1\n});\n\n\nconst checkIfLegal = (fileIndex, rankIndex, totalFiles, totalRanks) =>\n  checkIfBIsNotOutsideAAndC(0, fileIndex, totalFiles - 1)\n    && checkIfBIsNotOutsideAAndC(0, rankIndex, totalRanks - 1);\n\nlet memoizedMoves = { prevDimsString: '0x0' };\nconst resetMemoizedMoves = (newDimsString) =>{\n  memoizedMoves = { prevDimsString: newDimsString };\n};\n\nconst getLegalMoves = (fileIndex, rankIndex, totalFiles, totalRanks) => {\n  const squareName = getSquareName(fileIndex, rankIndex);\n  const boardDims = [totalFiles, totalRanks];\n\n  const dimsString = [totalFiles, totalRanks].join('x');\n  if (dimsString !== memoizedMoves.prevDimsString) {\n    resetMemoizedMoves(dimsString);\n  }\n\n  if (Array.isArray(memoizedMoves[squareName])) return memoizedMoves[squareName];\n\n  const startSquare = new Vector(fileIndex, rankIndex);\n  const moves = [];\n  const { PI, cos, sin, round } = Math;\n\n  // each iteration goes out two squares, then sideways plus/minus one square\n  // start at 0 degrees, increase by 90 degrees, stop before 360 degrees\n  for (let theta = 0; theta < 2 * PI; theta += PI / 2) {\n    // start iterating for (1, 0), then (0, 1)...\n    const firstOffset = new Vector(round(cos(theta)), round(sin(theta)));\n    const twoSquareOffset = firstOffset.times(2);\n    const twoStepSquare = startSquare.plus(twoSquareOffset);\n\n    if (checkIfLegal(...twoStepSquare.array, ...boardDims)) {\n      const secondOffset = firstOffset.reverse();\n      const firstEndIndices = twoStepSquare.plus(secondOffset).array;\n      const secondEndIndices = twoStepSquare.plus(secondOffset.times(-1)).array;\n\n      if (checkIfLegal(...firstEndIndices, ...boardDims)) {\n        moves.push(firstEndIndices);\n      };\n      if (checkIfLegal(...secondEndIndices, ...boardDims)) {\n        moves.push(secondEndIndices);\n      }\n    }\n  }\n\n  memoizedMoves[squareName] = moves;\n  return moves;\n}\n\nexport {\n  getLegalMoves,\n  getSquareName,\n  getRankName,\n  getFileName,\n  parseSquareName,\n  checkIfLegal\n};\n","import { createContext } from \"react\";\n\nconst LangContext = createContext({\n  lang: \"empty\",\n  setLang: () => {},\n});\n\nexport default LangContext;\n","import { useState, useEffect, useRef, useContext } from \"react\";\n\nimport LangContext from \"../LangContext\";\nimport strings from \"../strings\";\nimport { MIN_INTERVAL } from \"../constants\";\n\nconst startTimer = (interval, makeRandomMoves, setIntervalId) => {\n  const totalNewMoves = Math.max(1, MIN_INTERVAL / interval);\n  const newIntervalId = window.setInterval(() => {\n    makeRandomMoves(totalNewMoves);\n  }, Math.max(MIN_INTERVAL, interval));\n  setIntervalId(newIntervalId);\n};\n\nfunction Buttons({\n  makeRandomMoves,\n  resetBoard,\n  interval,\n  totalFiles,\n  totalRanks,\n  isManual,\n}) {\n  const { lang } = useContext(LangContext);\n  const { START, STOP, RESET } = strings;\n\n  const dimsString = `${totalFiles}x${totalRanks}`;\n  const [prevDimsString, setPrevDimsString] = useState(dimsString);\n  const [intervalId, setIntervalId] = useState(null);\n  const [prevInterval, setPrevInterval] = useState(interval);\n  const resetRef = useRef(null);\n  useEffect(() => {\n    if (isManual && intervalId) {\n      window.clearInterval(intervalId);\n      setIntervalId(null);\n    }\n    if (intervalId !== null) {\n      if (interval !== prevInterval) {\n        window.clearInterval(intervalId);\n        startTimer(interval, makeRandomMoves, setIntervalId);\n      }\n      if (dimsString !== prevDimsString) {\n        window.clearInterval(intervalId);\n        setIntervalId(null);\n      }\n    }\n    setPrevInterval(interval);\n    setPrevDimsString(dimsString);\n\n    return () => {\n      if (intervalId) window.clearInterval(intervalId);\n    };\n  }, [\n    intervalId,\n    interval,\n    prevInterval,\n    makeRandomMoves,\n    prevDimsString,\n    dimsString,\n    isManual,\n  ]);\n\n  const handleStart = () => {\n    startTimer(interval, makeRandomMoves, setIntervalId);\n  };\n  const handleStop = () => {\n    window.clearInterval(intervalId);\n    setIntervalId(null);\n  };\n  const handleReset = () => {\n    if (intervalId !== null) handleStop();\n    resetBoard();\n    resetRef.current.blur();\n  };\n\n  return (\n    <>\n      <button\n        disabled={isManual || intervalId !== null}\n        className=\"panel-button\"\n        onClick={handleStart}\n        type=\"button\"\n      >\n        {START[lang]}\n      </button>\n      <button\n        disabled={isManual || intervalId === null}\n        className=\"panel-button\"\n        onClick={handleStop}\n        type=\"button\"\n      >\n        {STOP[lang]}\n      </button>\n      <button\n        ref={resetRef}\n        className=\"panel-button\"\n        onClick={handleReset}\n        type=\"button\"\n      >\n        {RESET[lang]}\n      </button>\n    </>\n  );\n}\n\nexport default Buttons;\n","import { useState, cloneElement } from \"react\";\n\nfunction DisclosureWidget({ buttonText, children, ...restProps }) {\n  const [expanded, setExpanded] = useState(false);\n  let togglerClass = \"disclosure-toggler\";\n  let contentClass = \"disclosure-content\";\n  if (expanded) {\n    togglerClass += \" open\";\n    contentClass += \" open\";\n  }\n  return (\n    <div>\n      <button\n        className={togglerClass}\n        onClick={() => {\n          setExpanded(!expanded);\n        }}\n      >\n        {buttonText}\n      </button>\n      <div className={contentClass}>{cloneElement(children, restProps)}</div>\n    </div>\n  );\n}\n\nexport default DisclosureWidget;\n","import { useState, useEffect, useRef } from \"react\";\n\nconst copyToClipboard = async (text, callback) => {\n  await navigator.clipboard.writeText(text);\n  callback();\n};\n\nfunction useCopy(copyCallback, resetCallback, lang) {\n  const [hasCopied, setHasCopied] = useState(false);\n  const timeoutId = useRef(null);\n\n  useEffect(() => {\n    if (hasCopied) {\n      timeoutId.current = window.setTimeout(() => {\n        resetCallback();\n        setHasCopied(false);\n      }, 700);\n    }\n    return () => {\n      if (hasCopied) {\n        window.clearTimeout(timeoutId.current);\n      }\n    };\n  }, [hasCopied, resetCallback, lang]);\n\n  const handleCopy = (string) => {\n    copyToClipboard(string, () => {\n      copyCallback();\n      setHasCopied(true);\n    });\n  };\n\n  return handleCopy;\n}\n\nexport default useCopy;\n","import { useState, useRef, useEffect, useContext } from \"react\";\nimport classNames from \"classnames\";\nimport { EOL } from \"os\";\n\nimport strings from \"../strings\";\nimport LangContext from \"../LangContext\";\nimport useCopy from \"../utils/useCopy\";\n\nconst { TRIP_COUNT, MOVE_COUNTS, AVERAGE, COPY, COPY_MSG, COPIED } = strings;\n\nconst sumReducer = (acc, val) => acc + val;\n\nfunction StatsSection({ id, heading, array }) {\n  const { lang } = useContext(LangContext);\n  const [buttonText, setButtonText] = useState(COPY[lang]);\n\n  const handleCopy = useCopy(\n    () => setButtonText(COPIED[lang]),\n    () => setButtonText(COPY[lang]),\n    lang\n  );\n\n  const [showCopy, setShowCopy] = useState(false);\n  const textareaRef = useRef(null);\n\n  const handleMouseEnter = () => {\n    setShowCopy(true);\n  };\n  const handleMouseLeave = () => {\n    setShowCopy(false);\n  };\n\n  useEffect(() => {\n    // NB: scroll methods not implemented in jsdom\n    // see https://github.com/jsdom/jsdom/pull/2626\n    // and https://github.com/jsdom/jsdom/issues/2751\n    // FIXME: make this testable\n    if (textareaRef?.current?.scrollTo) {\n      const { scrollHeight } = textareaRef.current;\n      textareaRef.current.scrollTo({\n        top: scrollHeight,\n        left: 0,\n        behavior: \"smooth\",\n      });\n    }\n  });\n  const textareaId = `textarea-${id}`;\n  const countId = `count-${id}`;\n  const aveId = `ave-${id}`;\n\n  const textareaValue = array.join(\", \");\n  const average =\n    array.length > 0\n      ? (array.reduce(sumReducer) / array.length).toFixed(2)\n      : \"\";\n  let clipboardValue = array.join(EOL);\n  clipboardValue += EOL;\n\n  const buttonClass = classNames({ copy: true, show: showCopy });\n  const msgClass = classNames({ \"copy-msg\": true, show: showCopy });\n\n  return (\n    <div className=\"section\" data-heading={heading}>\n      <div>\n        <label className=\"inline\" id={countId}>\n          {TRIP_COUNT[lang]}\n        </label>\n        <span aria-labelledby={countId}>{array.length.toString()}</span>\n      </div>\n      <label htmlFor={textareaId}>{MOVE_COUNTS[lang]}</label>\n      <div\n        className=\"textarea-wrapper\"\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <textarea\n          id={textareaId}\n          ref={textareaRef}\n          readOnly\n          value={textareaValue}\n        />\n        <button\n          className={buttonClass}\n          onClick={() => {\n            handleCopy(clipboardValue);\n          }}\n        >\n          {buttonText}\n        </button>\n        <div className={msgClass}>{COPY_MSG[lang]}</div>\n      </div>\n\n      <div>\n        <label className=\"inline\" id={aveId}>\n          {AVERAGE[lang]}\n        </label>\n        <span aria-labelledby={aveId}>{average}</span>\n      </div>\n    </div>\n  );\n}\n\nexport default StatsSection;\n","import { useState, useContext } from \"react\";\nimport { EOL } from \"os\";\n\nimport StatsSection from \"../components/StatsSection\";\nimport strings from \"../strings\";\nimport LangContext from \"../LangContext\";\nimport useCopy from \"../utils/useCopy\";\n\nconst { TO_INITIAL, TO_ALL, TOTAL_MOVES, COPIED, COPY_BOARD } = strings;\n\nfunction Stats({\n  stats: { totalMoves, countsForReturn, countsForTour },\n  visitCounts,\n}) {\n  const { lang } = useContext(LangContext);\n\n  const [buttonText, setButtonText] = useState(COPY_BOARD[lang]);\n\n  let visitCountsString = visitCounts\n    .slice(0)\n    .reverse()\n    .map((rankCounts) => rankCounts.join(\",\"))\n    .join(EOL);\n  visitCountsString += EOL;\n\n  const handleCopy = useCopy(\n    () => {\n      setButtonText(COPIED[lang]);\n    },\n    () => {\n      setButtonText(COPY_BOARD[lang]);\n    },\n    lang\n  );\n  const handleClick = () => {\n    handleCopy(visitCountsString);\n  };\n\n  return (\n    <div>\n      <StatsSection\n        id=\"returnsToInitial\"\n        heading={TO_INITIAL[lang]}\n        array={countsForReturn}\n      />\n      <StatsSection id=\"tours\" heading={TO_ALL[lang]} array={countsForTour} />\n      <div>\n        <label id=\"totalMoves\" className=\"inline\" htmlFor=\"totalMoves\">\n          {TOTAL_MOVES[lang]}\n        </label>\n        <span aria-labelledby=\"totalMoves\">{totalMoves.toString()}</span>\n      </div>\n      <button\n        type=\"button\"\n        className=\"button button-link\"\n        onClick={handleClick}\n      >\n        {buttonText}\n      </button>\n    </div>\n  );\n}\n\nexport default Stats;\n","function Checkbox({ id, isChecked, isDisabled, children, handleChange }) {\n  const labelClass = isDisabled ? \"disabled\" : undefined;\n  return (\n    <div>\n      <input\n        type=\"checkbox\"\n        id={id}\n        onChange={handleChange}\n        checked={isChecked}\n        disabled={isDisabled}\n      />\n      <label className={labelClass} htmlFor={id}>\n        {children}\n      </label>\n    </div>\n  );\n}\n\nexport default Checkbox;\n","import { MIN_BOARD_LENGTH, MAX_BOARD_LENGTH } from \"../constants\";\n\nfunction NumberInput({ label, value, handleChange, title }) {\n  const titleValue = title.length > 0 ? title : undefined;\n  return (\n    <div className=\"number-input-wrapper\" title={titleValue}>\n      <label className=\"number\" htmlFor={`${label}-input`}>\n        {label}\n      </label>\n      <input\n        type=\"number\"\n        id={`${label}-input`}\n        value={value}\n        min={MIN_BOARD_LENGTH}\n        max={MAX_BOARD_LENGTH}\n        onChange={handleChange}\n      />\n    </div>\n  );\n}\n\nexport default NumberInput;\n","import { useState, useContext } from \"react\";\n\nimport Checkbox from \"../components/Checkbox\";\nimport NumberInput from \"../components/NumberInput\";\nimport { SPEED_MAP, MIN_INTERVAL } from \"../constants\";\nimport strings from \"../strings\";\nimport LangContext from \"../LangContext\";\n\nconst intervals = Array.from(SPEED_MAP.values());\nconst {\n  SPEED,\n  SHOW,\n  KNIGHT,\n  COUNT,\n  PERCENT_MAX,\n  HEATMAP,\n  HIGHLIGHT,\n  BOARD,\n  RANKS,\n  FILES,\n  ROWS,\n  COLS,\n  NEW_BOARD,\n  MODE,\n  AUTOMATIC,\n  MANUAL,\n} = strings;\n\nfunction Settings({\n  speedNames,\n  speedIndex,\n  setSpeed,\n  displaySettings: {\n    showKnight,\n    showCount,\n    showPercent,\n    showHeatmap,\n    showHighlight,\n  },\n  toggleDisplaySettings,\n  initialTotalFiles,\n  initialTotalRanks,\n  changeDimensions,\n  isManual,\n  setMode,\n}) {\n  const { lang } = useContext(LangContext);\n  const [newTotalFiles, setNewTotalFiles] = useState(initialTotalFiles);\n  const [newTotalRanks, setNewTotalRanks] = useState(initialTotalRanks);\n\n  const handleFiles = ({ target: { value } }) => {\n    setNewTotalFiles(parseInt(value, 10));\n  };\n  const handleRanks = ({ target: { value } }) => {\n    setNewTotalRanks(parseInt(value, 10));\n  };\n  const handleUpdate = () => {\n    changeDimensions(newTotalFiles, newTotalRanks);\n  };\n\n  return (\n    <div>\n      <label htmlFor=\"speed-select\">{SPEED[lang]}</label>\n      <select\n        id=\"speed-select\"\n        value={speedIndex.toString()}\n        onChange={setSpeed}\n        multiple={false}\n      >\n        {speedNames.map((nameObj, i) => (\n          <option value={i.toString()} key={i}>\n            {nameObj[lang]}\n          </option>\n        ))}\n      </select>\n      <div className=\"section\" data-heading={SHOW[lang]}>\n        <Checkbox\n          id=\"show-knight\"\n          isChecked={showKnight}\n          isDisabled={intervals[speedIndex] < MIN_INTERVAL}\n          handleChange={() => {\n            toggleDisplaySettings(\"showKnight\");\n          }}\n        >\n          {KNIGHT[lang]}\n        </Checkbox>\n        <Checkbox\n          id=\"show-count\"\n          isChecked={showCount}\n          handleChange={() => {\n            toggleDisplaySettings(\"showCount\");\n          }}\n        >\n          {COUNT[lang]}\n        </Checkbox>\n        <Checkbox\n          id=\"show-percent\"\n          isChecked={showPercent}\n          handleChange={() => {\n            toggleDisplaySettings(\"showPercent\");\n          }}\n        >\n          {PERCENT_MAX[lang]}\n        </Checkbox>\n        <Checkbox\n          id=\"show-heatmap\"\n          isChecked={showHeatmap}\n          handleChange={() => {\n            toggleDisplaySettings(\"showHeatmap\");\n          }}\n        >\n          {HEATMAP[lang]}\n        </Checkbox>\n        <Checkbox\n          id=\"show-highlight\"\n          isChecked={showHighlight}\n          handleChange={() => {\n            toggleDisplaySettings(\"showHighlight\");\n          }}\n        >\n          {HIGHLIGHT[lang]}\n        </Checkbox>\n      </div>\n      <div className=\"section\" data-heading={BOARD[lang]}>\n        <NumberInput\n          label={RANKS[lang]}\n          title={ROWS[lang]}\n          value={newTotalRanks}\n          handleChange={handleRanks}\n        />\n        <NumberInput\n          label={FILES[lang]}\n          title={COLS[lang]}\n          value={newTotalFiles}\n          handleChange={handleFiles}\n        />\n        <button\n          type=\"button\"\n          className=\"button button-link\"\n          onClick={handleUpdate}\n        >\n          {NEW_BOARD[lang]}\n        </button>\n      </div>\n      <section className=\"section\" data-heading={MODE[lang]}>\n        <div>\n          <input\n            type=\"radio\"\n            id=\"auto-mode\"\n            name=\"mode-radio\"\n            value=\"auto\"\n            checked={!isManual}\n            onChange={setMode}\n          />\n          <label htmlFor=\"auto-mode\">{AUTOMATIC[lang]}</label>\n        </div>\n        <div>\n          <input\n            type=\"radio\"\n            id=\"manual-mode\"\n            name=\"mode-radio\"\n            value=\"manual\"\n            checked={isManual}\n            onChange={setMode}\n          />\n          <label htmlFor=\"manual-mode\">{MANUAL[lang]}</label>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default Settings;\n","import { Component } from \"react\";\n\nimport Board from \"../components/Board\";\nimport Rank from \"../components/Rank\";\nimport Square from \"../components/Square\";\nimport Knight from \"../components/Knight\";\nimport {\n  getSquareName,\n  getLegalMoves,\n  getRankName,\n  getFileName,\n  parseSquareName,\n} from \"../utils/boardUtils\";\nimport { getGradientImageData, getHeatmapRGB } from \"../utils/imageUtils\";\n\nimport Buttons from \"./Buttons\";\nimport DisclosureWidget from \"../components/DisclosureWidget\";\nimport Stats from \"./Stats\";\nimport Settings from \"./Settings\";\nimport { SPEED_MAP, CANVAS_WIDTH, MIN_INTERVAL } from \"../constants\";\nimport strings from \"../strings\";\n\nconst initialStats = {\n  totalMoves: 0,\n  countsForReturn: [],\n  countsForTour: [],\n  currentReturnCount: 0,\n  currentTourCount: 0,\n};\n\nconst { SETTINGS, STATS } = strings;\n\nclass Main extends Component {\n  constructor() {\n    super();\n\n    const totalFiles = 8;\n    const totalRanks = 8;\n    const visitCounts = new Array(totalRanks)\n      .fill(0)\n      .map(() => new Array(totalFiles).fill(0));\n\n    // fallbacks as a workaround for jsdom not doing css variables:\n    // see https://github.com/jsdom/cssstyle/pull/111\n    /*\n    It looks kinda funny using the off-white light square\n    so I'm using pure white instead of this\n    const lightSqBg =\n      getComputedStyle(document.documentElement).getPropertyValue(\n        \"--light-square-bg-color\"\n      ) || \"white\";\n    */\n    const darkSqBg =\n      getComputedStyle(document.documentElement).getPropertyValue(\n        \"--dark-square-bg-color\"\n      ) || \"black\";\n    const gradientImageData = getGradientImageData(CANVAS_WIDTH, [\n      \"#fff\",\n      darkSqBg,\n    ]);\n\n    const stats = Object.assign({}, initialStats);\n\n    this.boardEl = null;\n\n    this.state = {\n      totalRanks: totalRanks,\n      totalFiles: totalFiles,\n      stats: stats,\n      visitedSquareNameSet: new Set([\"a1\"]),\n      maxSquareCount: 1,\n      visitCounts: visitCounts,\n      startSquareName: \"a1\",\n      currentRankIndex: 0,\n      currentFileIndex: 0,\n      targetSquareNames: [],\n      squareWidth: 0,\n      speedIndex: 0,\n      displaySettings: {\n        showKnight: true,\n        showCount: true,\n        showPercent: false,\n        showHeatmap: false,\n        showHighlight: true,\n      },\n      gradientImageData: gradientImageData,\n      isManual: false,\n      isResizing: false,\n      isDragging: false,\n      isClicked: false,\n      timeoutId: null,\n    };\n  }\n\n  // lifecycle methods\n  componentDidMount() {\n    this.resizeObserver = new ResizeObserver(this.resizeCallback);\n    if (this.boardEl) {\n      this.resizeObserver.observe(this.boardEl);\n    }\n  }\n\n  componentWillUnmount() {\n    this.resizeObserver.disconnect();\n    if (this.state.timeoutId) window.clearTimeout(this.state.timeoutId);\n  }\n\n  // callbacks for accessing DOM node information\n  boardRefCallback = (element) => {\n    if (element) {\n      if (!this.boardEl) this.boardEl = element;\n      const squareWidth = element.clientWidth / this.state.totalFiles;\n      this.setState({ squareWidth });\n    }\n  };\n\n  resizeCallback = ([{ contentRect }]) => {\n    if (this.state.timeoutId) {\n      window.clearTimeout(this.state.timeoutId);\n    }\n    const newId = window.setTimeout(() => {\n      this.setState({\n        isResizing: false,\n        timeoutId: null,\n      });\n    }, 200);\n\n    this.setState({\n      squareWidth: contentRect.width / this.state.totalFiles,\n      isResizing: true,\n      timeoutId: newId,\n    });\n  };\n\n  // heatmap methods\n  getHeatmapHexString = (heatValue) =>\n    getHeatmapRGB(heatValue, this.state.gradientImageData);\n\n  // logic utils for manipulating squares\n  // visually and in html, first row of table is last logical rank array\n  reverseRankIndex = (rankIndex) => this.state.totalRanks - rankIndex - 1;\n\n  // state-changing methods\n  moveKnight = (newMoves) => {\n    const newSquareNames = newMoves.map((indices) => getSquareName(...indices));\n    const newVisitCounts = this.state.visitCounts.map((rank, rankIndex) =>\n      rank.map(\n        (visitCount, fileIndex) =>\n          visitCount +\n          newSquareNames.filter(\n            (squareName) => squareName === getSquareName(fileIndex, rankIndex)\n          ).length\n      )\n    );\n    const lastMove = newMoves.slice(-1);\n\n    const newMaxSquareCount = newVisitCounts\n      .flat()\n      .reduce((acc, val) => Math.max(acc, val));\n    this.setState({\n      currentFileIndex: lastMove[0][0],\n      currentRankIndex: lastMove[0][1],\n      visitCounts: newVisitCounts,\n      maxSquareCount: newMaxSquareCount,\n    });\n  };\n\n  makeRandomMoves = (totalNewMoves = 1) => {\n    const {\n      currentFileIndex,\n      currentRankIndex,\n      startSquareName,\n      visitedSquareNameSet,\n      stats: {\n        totalMoves,\n        countsForReturn,\n        countsForTour,\n        currentReturnCount,\n        currentTourCount,\n      },\n    } = this.state;\n    let tempFileIndex = currentFileIndex;\n    let tempRankIndex = currentRankIndex;\n    let tempReturnCount = currentReturnCount;\n    let tempTourCount = currentTourCount;\n    let tempVisitedSquareNameSet = new Set(visitedSquareNameSet);\n\n    const newReturnCounts = [];\n    const newTourCounts = [];\n\n    const newMoves = [];\n    // TODO: DRY out the stat update logic\n    for (let i = 0; i < totalNewMoves; i += 1) {\n      const { totalRanks, totalFiles } = this.state;\n      const possibleMoves = getLegalMoves(\n        tempFileIndex,\n        tempRankIndex,\n        totalFiles,\n        totalRanks\n      );\n      const nextMoveIndex = Math.floor(Math.random() * possibleMoves.length);\n      const nextMove = possibleMoves[nextMoveIndex];\n      const nextSquareName = getSquareName(...nextMove);\n      tempReturnCount += 1;\n      if (nextSquareName === startSquareName) {\n        newReturnCounts.push(tempReturnCount);\n        tempReturnCount = 0;\n      }\n\n      tempTourCount += 1;\n      tempVisitedSquareNameSet.add(nextSquareName);\n      if (tempVisitedSquareNameSet.size === totalFiles * totalRanks) {\n        newTourCounts.push(tempTourCount);\n        tempVisitedSquareNameSet = new Set([nextSquareName]);\n        tempTourCount = 0;\n      }\n      newMoves.push(nextMove);\n      [tempFileIndex, tempRankIndex] = nextMove;\n    }\n    this.moveKnight(newMoves);\n\n    const newStats = {\n      totalMoves: totalMoves + totalNewMoves,\n      countsForReturn: countsForReturn.concat(newReturnCounts),\n      countsForTour: countsForTour.concat(newTourCounts),\n      currentReturnCount: tempReturnCount,\n      currentTourCount: tempTourCount,\n    };\n\n    this.setState({\n      stats: newStats,\n      visitedSquareNameSet: tempVisitedSquareNameSet,\n    });\n  };\n  makeManualMove = (squareName) => {\n    const {\n      totalFiles,\n      totalRanks,\n      startSquareName,\n      visitedSquareNameSet,\n      stats: {\n        totalMoves,\n        countsForReturn,\n        countsForTour,\n        currentReturnCount,\n        currentTourCount,\n      },\n    } = this.state;\n    let newReturnCount = currentReturnCount + 1;\n    const newReturnCounts = countsForReturn.slice(0);\n    if (squareName === startSquareName) {\n      newReturnCounts.push(newReturnCount);\n      newReturnCount = 0;\n    }\n    let newTourCount = currentTourCount + 1;\n    const newTourCounts = countsForTour.slice(0);\n    let newVisitedSquareNameSet = new Set(visitedSquareNameSet);\n    newVisitedSquareNameSet.add(squareName);\n    if (newVisitedSquareNameSet.size === totalFiles * totalRanks) {\n      newTourCounts.push(newTourCount);\n      newTourCount = 0;\n      newVisitedSquareNameSet = new Set([squareName]);\n    }\n    const { fileIndex, rankIndex } = parseSquareName(squareName);\n\n    this.moveKnight([[fileIndex, rankIndex]]);\n    this.setClickedSquare(fileIndex, this.reverseRankIndex(rankIndex));\n    const newStats = {\n      totalMoves: totalMoves + 1,\n      countsForReturn: countsForReturn.concat(newReturnCounts),\n      countsForTour: countsForTour.concat(newTourCounts),\n      currentReturnCount: newReturnCount,\n      currentTourCount: newTourCount,\n    };\n\n    this.setState({\n      stats: newStats,\n      visitedSquareNameSet: newVisitedSquareNameSet,\n    });\n  };\n\n  setSpeed = ({ target: { value } }) => {\n    this.setState({\n      speedIndex: parseInt(value, 10),\n    });\n  };\n\n  toggleDisplaySettings = (settingName) => {\n    const newDisplaySettings = Object.assign({}, this.state.displaySettings, {\n      [settingName]: !this.state.displaySettings[settingName],\n    });\n    this.setState({\n      displaySettings: newDisplaySettings,\n    });\n  };\n\n  resetBoard = (initialRankIndex = 0, initialFileIndex = 0) => {\n    if (this.state.isClicked) {\n      this.unsetClickedSquare();\n    }\n    const visitCounts = new Array(this.state.totalRanks)\n      .fill(0)\n      .map(() => new Array(this.state.totalFiles).fill(0));\n\n    const [currentRankIndex, currentFileIndex] = [\n      initialRankIndex,\n      initialFileIndex,\n    ];\n    const maxSquareCount = 1;\n    const startSquareName = getSquareName(initialFileIndex, initialRankIndex);\n    const visitedSquareNameSet = new Set([startSquareName]);\n    const stats = Object.assign({}, initialStats);\n\n    this.setState({\n      visitCounts,\n      currentFileIndex,\n      currentRankIndex,\n      maxSquareCount,\n      startSquareName,\n      visitedSquareNameSet,\n      stats,\n    });\n  };\n\n  changeDimensions = (newTotalFiles, newTotalRanks) => {\n    document.documentElement.style.setProperty(\"--total-files\", newTotalFiles);\n    document.documentElement.style.setProperty(\"--total-ranks\", newTotalRanks);\n    let newSquareWidth = 0;\n    if (this.boardEl) {\n      newSquareWidth = this.boardEl.clientWidth / newTotalFiles;\n    } else {\n      console.error(\"Unable to get ref when changing dimensions.\");\n    }\n\n    this.setState(\n      {\n        totalFiles: newTotalFiles,\n        totalRanks: newTotalRanks,\n        squareWidth: newSquareWidth,\n      },\n      () => {\n        this.resetBoard();\n      }\n    );\n  };\n\n  setIsDragging = (bool) => {\n    this.setState({ isDragging: bool });\n  };\n  setDropSquare = (squareName) => {\n    const { fileIndex, rankIndex } = parseSquareName(squareName);\n    this.resetBoard(rankIndex, fileIndex);\n  };\n  setMode = ({ target: { value } }) => {\n    if (value === \"auto\") {\n      this.setState({\n        isManual: false,\n        isClicked: false,\n        targetSquareNames: [],\n      });\n    } else if (value === \"manual\") {\n      this.setState({ isManual: true });\n    } else throw new Error(`Unrecognized value '${value}' in setMode.`);\n  };\n  setClickedSquare = (fileIndex, visualRankIndex) => {\n    const logicalRankIndex = this.reverseRankIndex(visualRankIndex);\n    const legalMoves = getLegalMoves(\n      fileIndex,\n      logicalRankIndex,\n      this.state.totalFiles,\n      this.state.totalRanks\n    );\n    const targetSquareNames = legalMoves.map((move) => getSquareName(...move));\n    this.setState({\n      isClicked: true,\n      targetSquareNames: targetSquareNames,\n    });\n  };\n  unsetClickedSquare = () => {\n    this.setState({\n      isClicked: false,\n      targetSquareNames: [],\n    });\n  };\n\n  render() {\n    const interval = Array.from(SPEED_MAP.values())[this.state.speedIndex];\n    const displayKnight =\n      this.state.displaySettings.showKnight && interval >= MIN_INTERVAL;\n    return (\n      <main>\n        <div className=\"wrapper\">\n          <Board refCallback={this.boardRefCallback}>\n            {this.state.visitCounts\n              .slice(0)\n              .reverse()\n              .map((rankVisits, visualRankIndex) => {\n                const logicalRankIndex = this.reverseRankIndex(visualRankIndex);\n                const isCurrentRank =\n                  logicalRankIndex === this.state.currentRankIndex;\n                const rankName = getRankName(logicalRankIndex);\n\n                return (\n                  <Rank\n                    key={logicalRankIndex}\n                    isCurrent={isCurrentRank}\n                    rankName={rankName}\n                  >\n                    {rankVisits.map((visitCount, logicalFileIndex) => (\n                      <Square\n                        key={getFileName(logicalFileIndex) + rankName}\n                        visitCount={visitCount}\n                        maxSquareCount={this.state.maxSquareCount}\n                        squareName={getFileName(logicalFileIndex) + rankName}\n                        getHeatmapHexString={this.getHeatmapHexString}\n                        setDropSquare={this.setDropSquare}\n                        makeManualMove={this.makeManualMove}\n                        unsetClickedSquare={this.unsetClickedSquare}\n                        displaySettings={this.state.displaySettings}\n                        isCurrent={\n                          isCurrentRank &&\n                          logicalFileIndex === this.state.currentFileIndex\n                        }\n                        isDragging={this.state.isDragging}\n                        isTarget={this.state.targetSquareNames.includes(\n                          getSquareName(logicalFileIndex, logicalRankIndex)\n                        )}\n                        isManual={this.state.isManual}\n                      />\n                    ))}\n                  </Rank>\n                );\n              })}\n          </Board>\n          {displayKnight && (\n            <Knight\n              squareWidth={this.state.squareWidth}\n              visualRankIndex={this.reverseRankIndex(\n                this.state.currentRankIndex\n              )}\n              fileIndex={this.state.currentFileIndex}\n              interval={interval}\n              setIsDragging={this.setIsDragging}\n              setClickedSquare={this.setClickedSquare}\n              unsetClickedSquare={this.unsetClickedSquare}\n              isDraggable={\n                this.state.stats.totalMoves === 0 || this.state.isManual\n              }\n              isResizing={this.state.isResizing}\n              isManual={this.state.isManual}\n              isClicked={this.state.isClicked}\n            />\n          )}\n          <div className=\"panel left\">\n            <DisclosureWidget buttonText={STATS[this.props.lang]}>\n              <Stats\n                stats={this.state.stats}\n                visitCounts={this.state.visitCounts}\n              />\n            </DisclosureWidget>\n          </div>\n          <div className=\"panel right\">\n            <Buttons\n              makeRandomMoves={this.makeRandomMoves}\n              resetBoard={this.resetBoard}\n              interval={interval}\n              totalFiles={this.state.totalFiles}\n              totalRanks={this.state.totalRanks}\n              isManual={this.state.isManual}\n            />\n            <DisclosureWidget buttonText={SETTINGS[this.props.lang]}>\n              <Settings\n                speedNames={Array.from(SPEED_MAP.keys())}\n                speedIndex={this.state.speedIndex}\n                setSpeed={this.setSpeed}\n                displaySettings={this.state.displaySettings}\n                toggleDisplaySettings={this.toggleDisplaySettings}\n                initialTotalFiles={this.state.totalFiles}\n                initialTotalRanks={this.state.totalRanks}\n                changeDimensions={this.changeDimensions}\n                isManual={this.state.isManual}\n                setMode={this.setMode}\n              />\n            </DisclosureWidget>\n          </div>\n        </div>\n      </main>\n    );\n  }\n}\n\nexport default Main;\n","function getGradientImageData(canvasWidth, colorStops) {\n  const virtualCanvas = document.createElement('canvas');\n  virtualCanvas.height = 1;\n  virtualCanvas.width = canvasWidth;\n  const canvasContext = virtualCanvas.getContext('2d');\n  const heatmapGradient = canvasContext.createLinearGradient(0, 0, canvasWidth, 0);\n  colorStops.forEach((colorStop, i) => {\n    heatmapGradient.addColorStop(i / (colorStops.length - 1), colorStop);\n  });\n  canvasContext.fillStyle = heatmapGradient;\n  canvasContext.fillRect(0, 0, canvasWidth, 1);\n  const gradientImageData = canvasContext.getImageData(0, 0, canvasWidth, 1);\n  return gradientImageData;\n}\n\nfunction getHeatmapRGB(heatValue, imageData) {\n  const { length } = imageData.data;\n  const rawIndex = heatValue * (length - 1);\n  const index = rawIndex - rawIndex % 4;\n  const rbgInts = Array.from(imageData.data\n    .slice(index, index + 3));\n  const [red, green, blue] = rbgInts\n    .map(byte => byte.toString(16))\n    .map(string => string.length === 1 ? `0${string}` : string);\n  return `#${red}${green}${blue}`;\n}\n\nexport { getGradientImageData, getHeatmapRGB };\n","import { useContext } from \"react\";\nimport LangContext from \"../LangContext\";\nimport strings from \"../strings\";\n\nfunction LangSwitcher() {\n  const { setLang, lang } = useContext(LangContext);\n  const { OTHER_LANG, OTHER_LANG_CODE } = strings;\n\n  return (\n    <div className=\"lang-switcher\">\n      <button\n        type=\"button\"\n        className=\"button-link lang\"\n        onClick={() => {\n          setLang(OTHER_LANG_CODE[lang]);\n        }}\n      >\n        {OTHER_LANG[lang]}\n      </button>\n    </div>\n  );\n}\n\nexport default LangSwitcher;\n","import { Component } from \"react\";\n\nimport Main from \"./containers/Main\";\nimport LangContext from \"./LangContext\";\nimport LangSwitcher from \"./components/LangSwitcher\";\nimport strings from \"./strings\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    const lang = navigator.language.slice(0, 2);\n\n    this.setLang = (newLang) => {\n      this.setState({ lang: newLang });\n    };\n    this.state = {\n      lang: lang,\n      setLang: this.setLang,\n    };\n  }\n\n  render() {\n    return (\n      <LangContext.Provider value={this.state}>\n        <div className=\"app\">\n          <header>\n            <LangSwitcher />\n            <h1>{strings.TITLE[this.state.lang]}</h1>\n          </header>\n          <Main lang={this.state.lang} />\n          <footer>\n            <a\n              className=\"light\"\n              href=\"https://github.com/miachenmtl/random-jumps\"\n            >\n              Source and ReadMe\n            </a>\n          </footer>\n        </div>\n      </LangContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}